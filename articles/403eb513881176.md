---
title: "Jetpack Compose„ÅßËá™Âãï„Çπ„ÇØ„É≠„Éº„É´„Åô„Çã„ÉÜ„Ç≠„Çπ„Éà„ÅÆ‰ΩúÊàê"
emoji: "üéâ"
type: "tech" # tech: ÊäÄË°ìË®ò‰∫ã / idea: „Ç¢„Ç§„Éá„Ç¢
topics:
  - "android"
  - "compose"
  - "animation"
published: false
---

`Layout`„Çí‰Ωø„Å£„Å¶ÊñáÂ≠óÂàó„ÅÆ„Çµ„Ç§„Ç∫„Å´Âêà„Çè„Åõ„Å¶„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Åï„Åõ„Çã


```kotlin
@Composable
fun AutoScrollText(
    modifier: Modifier = Modifier,
    text: String,
    style: TextStyle = LocalTextStyle.current,
) {
    val transition = rememberInfiniteTransition(
        label = "AutoScrollTextRepeater"
    )
    val textWidth = remember { mutableIntStateOf(0) }
    val layoutWidth = remember { mutableIntStateOf(0) }

    val transitionWidth = textWidth.intValue

    val animateX: Int by transition.animateValue(
        initialValue = layoutWidth.intValue,
        targetValue = -transitionWidth,
        typeConverter = Int.VectorConverter,
        animationSpec = infiniteRepeatable(
            animation = tween(
                durationMillis = transitionWidth * 15,
                delayMillis = 300,
                easing = LinearEasing
            ),
        )
    )

    Layout(
        modifier = modifier,
        content = {
            Text(
                text = text,
                style = style,
                maxLines = 1,
            )
        },
        measurePolicy = { measurable, constraints ->
            val textMeasurable = measurable.first()

            layoutWidth.intValue = constraints.maxWidth

            val placeable = textMeasurable.measure(
                // layout„ÅÆ„Çµ„Ç§„Ç∫„Å´Èñ¢„Çè„Çâ„ÅöÂÖ®„Å¶„ÇíË°®Á§∫„Åô„Çã
                constraints.copy(maxWidth = Int.MAX_VALUE)
            )
            val fixedWidth = placeable.width
            textWidth.intValue = fixedWidth
            layout(layoutWidth.intValue, placeable.height) {
                placeable.place(animateX, 0)
            }
        }
    )
}

@Preview
@Composable
private fun AutoScrollTextPreview0() {
    Column(
        modifier = Modifier
            .width(100.dp)
    ) {
        AutoScrollText(
            text = "abcdefghijklmnopqrstuvwxyz",
        )
    }
}
```